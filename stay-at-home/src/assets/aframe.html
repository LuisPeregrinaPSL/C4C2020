<!doctype HTML>
<html>
  <head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
    <script src="https://unpkg.com/aframe-click-drag-component"></script>
    <script>
      function sendLoad(){
        console.log('sendLoad');
        var event = new CustomEvent('onVRLoaded');
        var vector = new THREE.Vector3( 0.28, 0.22, -0.23 );
        console.log(vector);
        var fVector = document.querySelector('a-scene').object3D.localToWorld(vector);
        console.log(fVector);
        event.document = document;
        event.vector = fVector;
        window.parent.dispatchEvent(event);
      }
    </script>
</head>

  </head>
  <body onload="sendLoad()">
    <div id="info_block" style='position: fixed; top: 10px; width:100%; text-align: center; z-index: 1;'>
      <div id="tree_count" style="width:100pt; background-color: whitesmoke;">Calculating...</div>
  </div>
    <a-scene pool__red="mixin: laser; size: 10">
      <!--a-entity camera look-controls position="1381652 5,812,351‬ 2,226,235‬"></a-entity-->
      <a-camera
        cursor-visible="true"
        cursor-scale="2"
        cursor-color="#0095DD"
        cursor-opacity="0.5">
      </a-camera>
        <a-assets>
            <img id="tree" src="/assets/tree.png">
            <a-asset-item id="fox" src="/assets/gltf/Fox.gltf"></a-asset-item>
            <a-asset-item id="tree" src="/assets/gltf/tree3.glb"></a-asset-item>
            <a-asset-item id="tree2" src="/assets/gltf/tree4.glb"></a-asset-item>
            <a-mixin id="red" material="color: red"></a-mixin>
            <a-mixin id="blue" material="color: blue"></a-mixin>
            <a-mixin id="cube" geometry="primitive: box"></a-mixin>
          </a-assets>
          <a-light type="directional" color="#FFF" intensity="0.5" position="-1 1 2"> </a-light>
          <!--a-light type="ambient" color="#FFF"> </a-light-->
          
        <!--a-box color="red" position="0 2 -5" rotation="0 45 45" scale="2 2 2"></a-box-->
        <!--a-image src="#tree" position="0 2 -5" width="3" height="3"></a-image-->
        <a-text id="treeNumber" value="" position='-1 3 -5'></a-text>
        <!--a-gltf-model src="#fox" animation-mixer position="-0.060 -0.041 -7.616" rotation="-0.570 -14.060 0" scale="0 0.020 0.060"></a-gltf-model-->
        <!--a-entity id="master" gltf-model="/assets/gltf/tree3.glb" scale="0.34 0.23 -0.23" position="-0.0705 0.68454 -4.138"></a-entity>
        <a-entity gltf-model="/assets/gltf/tree4.glb" scale="0.28 0.22 -0.23" position="-0.40456 0.68454 -2.138"></a-entity>
        <a-entity gltf-model="#tree2" scale="0.28 0.22 -0.23" position="0.5294 0.64632 -2.62589"></a-entity-->
        <!--a-entity mixin="red cube" position="-1.40456 0.68454 -2.138"></a-entity>
        <a-entity mixin="blue cube" position="1.40456 0.68454 -2.138"></a-entity>
        <video src="https://www.youtube.com/watch?v=pEHThzPsbrU" position="-1.00000 0.68454 preload="auto"></video-->
        <!-- Out of the box environment! -->
        <a-entity id="env" environment="preset: forest; dressing: trees; dressingAmount: 200; sunPosition: 0 5 0; lighting: distant; skyType: atmosphere"></a-entity>
      </a-scene>
  </body>
</html>